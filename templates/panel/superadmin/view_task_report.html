{% extends 'panel/base.html' %}

{% block title %}Task Report{% endblock %}

{% block content %}
<div class="card">
    <h1 class="card-title">Task Completion Report</h1>
    
    <a href="{% url 'superadmin_manage_tasks' %}" class="btn btn-warning" style="margin-bottom: 2rem;">← Back to Tasks</a>
    
    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
        <h2 style="margin-bottom: 1rem;">Task Details</h2>
        <p><strong>Title:</strong> {{ task.title }}</p>
        <p><strong>Description:</strong> {{ task.description }}</p>
        <p><strong>Assigned To:</strong> {{ task.assigned_to.username }} ({{ task.assigned_to.email }})</p>
        <p><strong>Created By:</strong> 
            {% if task.created_by %}
                {{ task.created_by.username }}
            {% else %}
                N/A
            {% endif %}
        </p>
        <p><strong>Due Date:</strong> {{ task.due_date|date:"Y-m-d" }}</p>
        <p><strong>Status:</strong> <span class="badge badge-{{ task.status }}">{{ task.get_status_display }}</span></p>
        <p><strong>Created At:</strong> {{ task.created_at|date:"Y-m-d H:i:s" }}</p>
        <p><strong>Updated At:</strong> {{ task.updated_at|date:"Y-m-d H:i:s" }}</p>
    </div>
    
    {% if task.status == 'completed' %}
    <div style="background: #d4edda; padding: 1.5rem; border-radius: 8px; border: 2px solid #28a745;">
        <h2 style="color: #155724; margin-bottom: 1rem;">Completion Report</h2>
        <p><strong>Worked Hours:</strong> {{ task.worked_hours }} hours</p>
        <p><strong>Report:</strong></p>
        <div style="background: white; padding: 1rem; border-radius: 5px; margin-top: 0.5rem; white-space: pre-wrap;">{{ task.completion_report }}</div>
    </div>
    {% else %}
    <div class="alert alert-warning">
        This task has not been completed yet. Completion report will be available once the task is marked as completed.
    </div>
    {% endif %}
</div>
{% endblock %}

